(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(22),s=n.n(i),c=n(11),o=n(16),u=n(3),l=n(4),d=n(6),j=n(5),h=n(8),b=n(2),m=n.n(b),p=n(7),f=n(14),O="user",g=function(e){return localStorage.setItem(O,JSON.stringify(e))},v=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},x=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(O));null===t&&(t={}),v(t)(e)}))},k=function(e){return new Promise((function(t){g(Object(o.a)(Object(o.a)({},{name:"",email:"",image:"",description:""}),e)),v("OK")(t)}))},N=function(e){return new Promise((function(t){g(Object(o.a)({},e)),v("OK")(t)}))},y=(n(31),n(32),n(0)),S=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)("p",{className:"loading",children:"Carregando..."})}}]),n}(a.Component),w=S,C=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={loading:!0,user:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:t=e.sent,this.setState({loading:!1,user:t.name,userImg:t.image});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.user,a=e.userImg;return Object(y.jsxs)("header",{"data-testid":"header-component",children:[Object(y.jsx)("h1",{children:"TrybeTunes"}),Object(y.jsxs)("nav",{children:[Object(y.jsx)(c.b,{to:"/search","data-testid":"link-to-search",children:"Pesquisa"}),Object(y.jsx)(c.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(y.jsx)(c.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]}),Object(y.jsx)("div",{className:"header-profileContainer",children:t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"header-profile-img",src:"./images/default-profile.jpeg",alt:""}),Object(y.jsx)(w,{})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"header-profile-img",src:a,alt:""}),Object(y.jsx)("p",{"data-testid":"header-user-name",children:n})]})})]})}}]),n}(a.Component),I=C,L=n(25),F="favorite_songs";JSON.parse(localStorage.getItem(F))||localStorage.setItem(F,JSON.stringify([]));var B=function(){return JSON.parse(localStorage.getItem(F))},D=function(e){return localStorage.setItem(F,JSON.stringify(e))},E=function(e){return function(t){setTimeout((function(){t(e)}),500)}},P=function(){return new Promise((function(e){var t=B();E(t)(e)}))},A=function(e){return new Promise((function(t){if(e){var n=B();D([].concat(Object(L.a)(n),[e]))}E("OK")(t)}))},J=function(e){return new Promise((function(t){var n=B();D(n.filter((function(t){return t.trackId!==e.trackId}))),E("OK")(t)}))},U=(n(42),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"handleFavorite",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,a=this.props,r=a.track,i=a.toggleLoadingHandler,s=a.updateHandler,c=!n.checked,i(),!c){e.next=9;break}return e.next=7,J(r);case 7:e.next=11;break;case 9:return e.next=11,A(r);case 11:return e.next=13,s();case 13:i();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.track,a=t.favoritesList,r=t.showArtwork,i=n.trackName,s=n.trackId,c=n.previewUrl,o=n.artworkUrl30,u=n.collectionName;return Object(y.jsxs)("div",{className:"songContainer",children:[r&&Object(y.jsx)("img",{src:o,alt:u,className:"songcard-img"}),Object(y.jsx)("h4",{children:i}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:c,controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(y.jsx)("code",{children:"audio"}),"."]}),Object(y.jsxs)("label",{htmlFor:"check-".concat(s),children:[Object(y.jsx)("input",{id:"check-".concat(s),type:"checkbox",className:"favoriteCheck","data-testid":"checkbox-music-".concat(s),onChange:function(t){return e.handleFavorite(t,s)},checked:a.some((function(e){return e.trackId===s}))}),"Favorita"]})]})}}]),n}(a.Component));U.defaultProps={showArtwork:!1};var H=U,M=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=M,K=(n(43),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={musicList:[],loading:!0,favoritesList:[]},e.toggleLoading=e.toggleLoading.bind(Object(f.a)(e)),e.updateFavoriteSongs=e.updateFavoriteSongs.bind(Object(f.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match,n=t.params.id,e.next=4,T(n);case 4:a=e.sent,this.setState({musicList:a,loading:!1}),this.updateFavoriteSongs();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateFavoriteSongs",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,this.setState({favoritesList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLoading",value:function(){this.setState((function(e){return{loading:!e.loading}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.musicList,a=t.loading,r=t.favoritesList;return Object(y.jsxs)("div",{"data-testid":"page-album",children:[Object(y.jsx)(I,{}),Object(y.jsx)("div",{className:"albumContainer",children:a?Object(y.jsx)(w,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"albumInfo",children:[Object(y.jsx)("img",{src:n[0].artworkUrl100,alt:""}),Object(y.jsx)("h2",{"data-testid":"album-name",children:n[0].collectionName}),Object(y.jsx)("h3",{"data-testid":"artist-name",children:n[0].artistName})]}),Object(y.jsx)("div",{className:"songsListContainer",children:n.map((function(t,n){return n>0&&Object(y.jsx)(H,{track:t,toggleLoadingHandler:e.toggleLoading,favoritesList:r,updateHandler:e.updateFavoriteSongs},t.trackId)}))})]})})]})}}]),n}(a.Component)),z=K,Z=(n(44),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={loading:!1,favoritesList:[]},e.toggleLoading=e.toggleLoading.bind(Object(f.a)(e)),e.updateFavoriteSongs=e.updateFavoriteSongs.bind(Object(f.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:n=t.sent,e.setState({loading:!1,favoritesList:n});case 4:case"end":return t.stop()}}),t)}))))}},{key:"toggleLoading",value:function(){this.setState((function(e){return{loading:!e.loading}}))}},{key:"updateFavoriteSongs",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("oi"),e.next=3,P();case 3:t=e.sent,this.setState({favoritesList:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.favoritesList,a=t.loading;return Object(y.jsxs)("div",{"data-testid":"page-favorites",children:[Object(y.jsx)(I,{}),Object(y.jsx)("div",{className:"favoritesContainer",children:a?Object(y.jsx)(w,{}):Object(y.jsxs)(y.Fragment,{children:[n.map((function(t){return Object(y.jsx)(H,{track:t,favoritesList:n,toggleLoadingHandler:e.toggleLoading,updateHandler:e.updateFavoriteSongs,showArtwork:!0},t.trackId)})),!n.length&&Object(y.jsx)("p",{children:"Nenhuma m\xfasica favoritada"})]})})]})}}]),n}(a.Component)),q=Z,R=(n(45),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={name:"",isButtonDisabled:!0,isLoggedIn:!1,loading:!1},e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=e.target;this.setState((function(){return{name:t.value,isButtonDisabled:t.value.length<3}}))}},{key:"handleSubmit",value:function(e){var t=this,n=this.state.name;e.preventDefault(),this.setState({loading:!0},Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({name:n,image:"./images/default-profile.jpeg"});case 2:t.setState({loading:!1,isLoggedIn:!0});case 3:case"end":return e.stop()}}),e)}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.isButtonDisabled,r=t.isLoggedIn,i=t.loading;return Object(y.jsxs)("div",{className:"loginContainer",children:[Object(y.jsx)("img",{src:"./images/logo-trybetunes.png",alt:"",className:"logo"}),Object(y.jsxs)("div",{"data-testid":"page-login",className:"loginFormContainer",children:[!0===i?Object(y.jsx)(w,{}):Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{type:"text",onChange:function(t){return e.handleChange(t)},"data-testid":"login-name-input",value:n,placeholder:"Nome"}),Object(y.jsx)("button",{type:"submit",onClick:function(t){return e.handleSubmit(t)},"data-testid":"login-submit-button",disabled:a,children:"Entrar"})]}),r&&Object(y.jsx)(h.a,{to:"/search"})]})]})}}]),n}(a.Component)),_=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),n}(a.Component),$=_,G=(n(46),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={userName:"",userEmail:"",userBio:"",userImg:"",loading:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:n=t.sent,e.setState({userName:n.name,userEmail:n.email,userBio:n.description,userImg:n.image,loading:!1});case 4:case"end":return t.stop()}}),t)}))))}},{key:"render",value:function(){var e=this.state,t=e.userName,n=e.userEmail,a=e.userBio,r=e.userImg,i=e.loading;return Object(y.jsxs)("div",{"data-testid":"page-profile",children:[Object(y.jsx)(I,{}),Object(y.jsx)("div",{className:"profileContainer",children:i?Object(y.jsx)(w,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"profile-row",children:[Object(y.jsx)("img",{src:r,className:"profile-img",alt:"","data-testid":"profile-image"}),Object(y.jsx)(c.b,{to:"/profile/edit",className:"edit-btn",children:"Editar perfil"})]}),Object(y.jsx)("h4",{children:"Nome"}),Object(y.jsx)("p",{children:t}),Object(y.jsx)("h4",{children:"E-mail"}),Object(y.jsx)("p",{children:n||"Nenhum e-mail cadastrado"}),Object(y.jsx)("h4",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("p",{children:a||"Nenhuma descri\xe7\xe3o cadastrada"})]})})]})}}]),n}(a.Component)),Q=n(18),V=(n(47),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={userName:"",userEmail:"",userBio:"",userImg:"",loading:!1,isButtonDisabled:!0,isInfoSaved:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:n=t.sent,e.setState({userName:n.name,userEmail:n.email,userBio:n.description,userImg:n.image,loading:!1},e.validateButton);case 4:case"end":return t.stop()}}),t)}))))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(Q.a)({},t.name,t.value),this.validateButton)}},{key:"handleSubmit",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,s,c,o=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state,a=n.userName,r=n.userEmail,i=n.userBio,s=n.userImg,c={name:a,email:r,description:i,image:s},t.preventDefault(),this.setState({loading:!0},Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(c);case 2:o.setState({isInfoSaved:!0});case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateButton",value:function(){var e=this.state,t=e.userName,n=e.userEmail,a=e.userBio,r=e.userImg,i=t.length>0&&n.length>0&&a.length>0&&r.length>0,s=/[a-zA-Z0-9._]+@[a-zA-Z]+\.[a-zA-Z.]*\w$/.test(n);this.setState({isButtonDisabled:!(s&&i)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.userName,a=t.userEmail,r=t.userBio,i=t.userImg,s=t.loading,c=t.isButtonDisabled,o=t.isInfoSaved;return Object(y.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(y.jsx)(I,{}),Object(y.jsx)("div",{className:"profileEditContainer",children:s?Object(y.jsx)(w,{}):Object(y.jsxs)("form",{children:[Object(y.jsxs)("label",{htmlFor:"inputName",children:["Nome",Object(y.jsx)("input",{type:"text",value:n,name:"userName",id:"inputName",onChange:function(t){return e.handleChange(t)},"data-testid":"edit-input-name"})]}),Object(y.jsxs)("label",{htmlFor:"inputEmail",children:["E-mail",Object(y.jsx)("input",{type:"email",value:a,name:"userEmail",id:"inputEmail",onChange:function(t){return e.handleChange(t)},"data-testid":"edit-input-email"})]}),Object(y.jsxs)("label",{htmlFor:"inputBio",children:["Descri\xe7\xe3o",Object(y.jsx)("input",{type:"text",value:r,name:"userBio",id:"inputBio",onChange:function(t){return e.handleChange(t)},"data-testid":"edit-input-description"})]}),Object(y.jsxs)("label",{htmlFor:"inputImg",children:["Imagem de usu\xe1rio",Object(y.jsx)("input",{type:"text","data-testid":"edit-input-image",value:i,name:"userImg",id:"inputImg",onChange:function(t){return e.handleChange(t)}})]}),Object(y.jsx)("button",{type:"submit","data-testid":"edit-button-save",disabled:c,onClick:function(t){return e.handleSubmit(t)},children:"Enviar"})]})}),o&&Object(y.jsx)(h.a,{to:"/profile"})]})}}]),n}(a.Component)),W=V,X=(n(48),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.album,t=e.artworkUrl100,n=e.collectionName,a=e.artistName,r=e.collectionId;return Object(y.jsxs)(c.b,{to:"/album/".concat(r),"data-testid":"link-to-album-".concat(r),className:"card",children:[Object(y.jsx)("img",{src:t,alt:""}),Object(y.jsx)("h3",{className:"albumTitle",children:n}),Object(y.jsx)("p",{className:"artistName",children:a})]})}}]),n}(a.Component)),Y=X,ee=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return i=e.sent,s=i.results,c=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=ee,ne=(n(49),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={artistName:"",artistSearched:"",isButtonDisabled:!0,loading:!0,albumsList:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"handleChange",value:function(e){var t=e.target;this.setState({artistName:t.value,isButtonDisabled:t.value.length<2})}},{key:"handleSearch",value:function(e){var t=this,n=this.state.artistName;e.preventDefault(),this.setState({artistName:"",loading:!0},Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n);case 2:a=e.sent,t.setState({loading:!1,artistSearched:n,albumsList:a});case 4:case"end":return e.stop()}}),e)}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.artistName,a=t.artistSearched,r=t.albumsList,i=t.isButtonDisabled,s=t.loading;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(I,{}),Object(y.jsx)("div",{className:"container",children:s?Object(y.jsx)(w,{}):Object(y.jsxs)("div",{className:"searchContainer",children:[Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{type:"text",onChange:function(t){return e.handleChange(t)},value:n,className:"searchArtistInput","data-testid":"search-artist-input",placeholder:"Nome do artista"}),Object(y.jsx)("button",{type:"submit",disabled:i,"data-testid":"search-artist-button",onClick:function(t){return e.handleSearch(t)},children:"Pesquisar"})]}),a&&Object(y.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(a)}),!r.length&&a?Object(y.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"}):Object(y.jsx)("div",{className:"cardsContainer",children:r.map((function(e){return Object(y.jsx)(Y,{album:e},e.collectionId)}))})]})})]})}}]),n}(a.Component)),ae=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{path:"/album/:id",render:function(e){return Object(y.jsx)(z,Object(o.a)({},e))}}),Object(y.jsx)(h.b,{path:"/search",component:ne}),Object(y.jsx)(h.b,{path:"/favorites",component:q}),Object(y.jsx)(h.b,{path:"/profile",component:G,exact:!0}),Object(y.jsx)(h.b,{path:"/profile/edit",component:W,exact:!0}),Object(y.jsx)(h.b,{path:"/",component:R,exact:!0}),Object(y.jsx)(h.b,{path:"/*",component:$})]})})}}]),n}(r.a.Component),re=ae;n(50);s.a.render(Object(y.jsx)(c.a,{children:Object(y.jsx)(re,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.4f7fd963.chunk.js.map